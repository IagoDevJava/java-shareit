CREATE TABLE IF NOT EXISTS USERS
(
    ID    BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME  VARCHAR(256) NOT NULL UNIQUE,
    EMAIL VARCHAR(256) NOT NULL UNIQUE
);

CREATE TABLE IF NOT EXISTS ITEMS
(
    ID           BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    NAME         VARCHAR(256) NOT NULL UNIQUE,
    DESCRIPTION  VARCHAR(1024),
    IS_AVAILABLE BOOLEAN      NOT NULL,
    OWNER_ID     BIGINT       NOT NULL REFERENCES USERS (ID),
    REQUEST_ID   BIGINT       NOT NULL
);

CREATE TABLE IF NOT EXISTS COMMENTS
(
    ID        BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    TEXT      VARCHAR(2048) NOT NULL UNIQUE,
    ITEM_ID   BIGINT        NOT NULL REFERENCES ITEMS (ID),
    AUTHOR_ID BIGINT        NOT NULL REFERENCES USERS (ID),
    CREATED   DATE
);

CREATE TABLE IF NOT EXISTS BOOKINGS
(
    ID         BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    START_DATE DATE    NOT NULL,
    END_DATE   DATE    NOT NULL,
    ITEM_ID    BIGINT  NOT NULL REFERENCES ITEMS (ID),
    BOOKER_ID  BIGINT  NOT NULL REFERENCES USERS (ID),
    STATUS     VARCHAR NOT NULL
);

CREATE TABLE IF NOT EXISTS REQUEST
(
    ID           BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    DESCRIPTION  VARCHAR(1024) NOT NULL UNIQUE,
    REQUESTER_ID BIGINT        NOT NULL REFERENCES USERS (ID)
);